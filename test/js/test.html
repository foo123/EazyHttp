<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Test</title>
</head>
<body>
<h1>Test</h1>
<h2>Open console</h2>
<form id="form" action="/test.php" method="post" enctype="application/x-www-form-urlencoded" onsubmit="return test(this);">
  <fieldset>
    <p>foo: <input type="text" name="foo[0]" value="bar" /></p>
    <p><input type="submit" value="Submit" /> </p>
  </fieldset>
</form>
<script type="text/javascript" src="./EazyHttp.js"></script>
<script>
function test(form)
{
    (new EazyHttp()).option('methods', ['fetch']).get('http://localhost:9000/redirect.php').then((response) => console.log(response.content)).catch((error) => console.log(error.toString()));

    (new EazyHttp()).option('methods', ['fetch']).option('timeout', 5).get('http://localhost:9000/timeout.php?delay=10').then((response) => console.log(response.content)).catch((error) => console.log(error.toString()));

    (new EazyHttp()).option('methods', ['xhr']).option('timeout', 5).get('http://localhost:9000/timeout.php?delay=10').then((response) => console.log(response.content)).catch((error) => console.log(error.toString()));

    (new EazyHttp()).option('methods', ['fetch']).post('http://localhost:9000/test.php', new FormData(form), {}, [{'name' : 'cookie', 'value' : 'value'}]).then((response) => console.log(JSON.stringify(response))).catch((error) => console.log(error.toString()));

    (new EazyHttp()).option('methods', ['xhr']).post('http://localhost:9000/test.php', {'foo':['bar']}, {}, [{'name' : 'cookie', 'value' : 'value'}]).then((response) => console.log(JSON.stringify(response))).catch((error) => console.log(error.toString()));

    (new EazyHttp()).option('methods', ['iframe']).post('http://localhost:9000/test.php', {'foo':['bar']}, {}, [{'name' : 'cookie', 'value' : 'value'}]).then((response) => console.log(JSON.stringify(response))).catch((error) => console.log(error.toString()));

    return false;
}
</script>
</body>
</html>